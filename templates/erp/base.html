{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ERP System{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .metric-card { transition: transform 0.2s ease-in-out; }
        .metric-card:hover { transform: translateY(-2px); }

        /* Light mode - default colors */
        body:not(.dark) {
            background-color: #f9fafb !important;
            color: #1f2937 !important;
        }
        body:not(.dark) .bg-white { background-color: #ffffff !important; }
        body:not(.dark) .bg-gray-50 { background-color: #f9fafb !important; }

        /* Ensure text is visible in light mode */
        body:not(.dark) .text-gray-900 { color: #111827 !important; }
        body:not(.dark) .text-gray-800 { color: #1f2937 !important; }
        body:not(.dark) .text-gray-700 { color: #374151 !important; }
        body:not(.dark) .text-gray-600 { color: #4b5563 !important; }
        body:not(.dark) .text-gray-500 { color: #6b7280 !important; }
        body:not(.dark) .text-gray-400 { color: #9ca3af !important; }

        /* Force visibility for dashboard elements in light mode */
        body:not(.dark) p,
        body:not(.dark) h1,
        body:not(.dark) h2,
        body:not(.dark) h3,
        body:not(.dark) h4,
        body:not(.dark) h5,
        body:not(.dark) h6,
        body:not(.dark) span,
        body:not(.dark) label,
        body:not(.dark) div,
        body:not(.dark) td,
        body:not(.dark) th {
            color: #111827 !important;
        }

        /* Fix for dashboard cards and metrics in light mode */
        body:not(.dark) .metric-card {
            background-color: #ffffff !important;
            color: #111827 !important;
            border-color: #e5e7eb !important;
        }

        /* Special case for dashboard counter text */
        body:not(.dark) .this-month,
        body:not(.dark) .last-month {
            color: #1f2937 !important;
        }

        /* Dark mode - improved contrast */
        .dark {
            background-color: #111827 !important;
            color: #f9fafb !important;
        }

        /* Dark mode backgrounds */
        .dark .bg-white { background-color: #1f2937 !important; }
        .dark .bg-gray-50 { background-color: #1f2937 !important; }
        .dark .bg-gray-800 { background-color: #1f2937 !important; }

        /* Dark mode text colors - high contrast */
        .dark .text-gray-900,
        .dark .text-gray-800,
        .dark .text-gray-700,
        .dark .text-gray-600,
        .dark .text-gray-500 {
            color: #f9fafb !important;
        }

        .dark .text-gray-400 { color: #d1d5db !important; }
        .dark .text-gray-300 { color: #e5e7eb !important; }

        /* Dark mode borders */
        .dark .border-gray-200 { border-color: #374151 !important; }
        .dark .border-gray-300 { border-color: #4b5563 !important; }
        .dark .divide-gray-200 { border-color: #374151 !important; }

        /* Dark mode cards */
        .dark .metric-card {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
        }

        /* Force visibility for all text elements in dark mode */
        .dark p,
        .dark h1,
        .dark h2,
        .dark h3,
        .dark h4,
        .dark h5,
        .dark h6,
        .dark span,
        .dark label,
        .dark td,
        .dark th {
            color: #f9fafb !important;
        }

        /* Dark mode table headers */
        .dark thead {
            background-color: #374151 !important;
        }

        .dark th {
            color: #f9fafb !important;
        }

        /* Dark mode form inputs */
        .dark input[type="text"],
        .dark input[type="email"],
        .dark input[type="password"],
        .dark input[type="number"],
        .dark input[type="date"],
        .dark input[type="datetime-local"],
        .dark select,
        .dark textarea {
            background-color: #374151 !important;
            color: #f9fafb !important;
            border-color: #4b5563 !important;
        }

        /* Dark mode header */
        .dark header {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
        }

        .toggle-checkbox { width: 40px; height: 20px; accent-color: #3498db; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-[#1a202c] text-gray-800 dark:text-white">
    <script>
        // Dark mode toggle logic
        function setDarkMode(enabled) {
            if (enabled) {
                document.body.classList.add('dark');
                localStorage.setItem('darkMode', 'enabled');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem('darkMode', 'disabled');
            }
        }
        // Apply dark mode from localStorage on page load
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark');
        } else {
            document.body.classList.remove('dark');
        }
    </script>
    <div class="flex h-screen">
        <!-- Sidebar - Now included as a separate template -->
        {% include 'erp/includes/sidebar.html' %}

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-auto bg-gray-50 dark:bg-[#1a202c]">
            <!-- Header -->
            <header class="bg-white dark:bg-[#232b3e] shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{% block page_title %}Dashboard{% endblock %}</h2>
                    <div class="flex items-center space-x-4">
                        <button class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                            <i class="fas fa-bell text-xl"></i>
                        </button>
                        <a href="{% url 'erp:settings' %}" class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                            <i class="fas fa-cog text-xl"></i>
                        </a>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-[#1a202c]">
                {% block content %}
                {% endblock %}
            </main>
        </div>
    </div>
</body>
</html>
