{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ERP System{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
        // Dark mode detection - runs immediately to prevent flicker
        (function() {
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.documentElement.classList.add('dark');
            }
        })();
    </script>
    <!-- Include locale utilities for currency and date formatting -->
    {% include 'erp/includes/locale-utils.html' %}
    <!-- Include translation utilities for multi-language support -->
    {% include 'erp/includes/translation-utils.html' %}
    <!-- Include category and status translations -->
    {% include 'erp/includes/translation-categories.html' %}
    <!-- Include translation patch for missing sidebar translations -->
    {% include 'erp/includes/translation-patch.html' %}
    <!-- Include additional translations for all ERP pages -->
    {% include 'erp/includes/translation-additions.html' %}
    <!-- Include financial reports translations -->
    {% include 'erp/includes/translation-financial-reports.html' %}
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .metric-card { transition: transform 0.2s ease-in-out; }
        .metric-card:hover { transform: translateY(-2px); }

        /* Light mode - consistent styling */
        html:not(.dark) body {
            background-color: #f9fafb;
            color: #111827;
        }

        /* Light mode backgrounds */
        html:not(.dark) .bg-white { background-color: #ffffff; }
        html:not(.dark) .bg-gray-50 { background-color: #f9fafb; }
        html:not(.dark) .bg-gray-100 { background-color: #f3f4f6; }

        /* Light mode text colors */
        html:not(.dark) .text-gray-900 { color: #111827; }
        html:not(.dark) .text-gray-800 { color: #1f2937; }
        html:not(.dark) .text-gray-700 { color: #374151; }
        html:not(.dark) .text-gray-600 { color: #4b5563; }
        html:not(.dark) .text-gray-500 { color: #6b7280; }

        /* Light mode borders */
        html:not(.dark) .border-gray-200 { border-color: #e5e7eb; }
        html:not(.dark) .border-gray-300 { border-color: #d1d5db; }

        /* Dark mode - improved contrast */
        html.dark body {
            background-color: #111827;
            color: #f9fafb;
        }

        /* Dark mode backgrounds */
        html.dark .bg-white { background-color: #1f2937; }
        html.dark .bg-gray-50 { background-color: #1f2937; }
        html.dark .bg-gray-100 { background-color: #374151; }
        html.dark .bg-gray-800 { background-color: #1f2937; }

        /* Dark mode text colors */
        html.dark .text-gray-900,
        html.dark .text-gray-800,
        html.dark .text-gray-700,
        html.dark .text-gray-600,
        html.dark .text-gray-500 {
            color: #f9fafb;
        }

        html.dark .text-gray-400 { color: #d1d5db; }
        html.dark .text-gray-300 { color: #e5e7eb; }

        /* Dark mode borders */
        html.dark .border-gray-200 { border-color: #374151; }
        html.dark .border-gray-300 { border-color: #4b5563; }
        html.dark .divide-gray-200 { border-color: #374151; }

        /* Dark mode form inputs */
        html.dark input[type="text"],
        html.dark input[type="email"],
        html.dark input[type="password"],
        html.dark input[type="number"],
        html.dark input[type="date"],
        html.dark input[type="datetime-local"],
        html.dark select,
        html.dark textarea {
            background-color: #374151;
            color: #f9fafb;
            border-color: #4b5563;
        }

        /* Dark mode header */
        html.dark header {
            background-color: #1f2937;
            border-color: #374151;
        }

        .toggle-checkbox { width: 40px; height: 20px; accent-color: #3498db; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-[#1a202c] text-gray-800 dark:text-white">
    <script>
        // Dark mode toggle logic
        function setDarkMode(enabled) {
            if (enabled) {
                document.documentElement.classList.add('dark');
                localStorage.setItem('darkMode', 'enabled');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('darkMode', 'disabled');
            }
        }
    </script>
    <div class="flex h-screen">
        <!-- Sidebar - Now included as a separate template -->
        {% include 'erp/includes/sidebar.html' %}

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-auto bg-gray-50 dark:bg-[#1a202c]">
            <!-- Header -->
            <header class="bg-white dark:bg-[#232b3e] shadow-sm border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">{% block page_title %}<span data-translate="Dashboard">Dashboard</span>{% endblock %}</h2>
                    <div class="flex items-center space-x-4">
                        <a href="{% url 'erp:settings' %}" class="p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                            <i class="fas fa-cog text-xl"></i>
                        </a>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-[#1a202c]">
                {% block content %}
                {% endblock %}
            </main>
        </div>
    </div>
</body>
</html>
