<script>
// Translation Patch - Adds missing sidebar translations
// This supplements the main translation-utils.html file

(function() {
    // Wait for the main translation system to load
    document.addEventListener('DOMContentLoaded', function() {
        // Add missing translations to the global translations object if it exists
        if (window.translate) {
            console.log('âœ… Translation patch loaded - adding missing sidebar translations');

            // We'll manually apply translations for items that might be missing
            const missingTranslations = {
                en: {
                    'Communications': 'Communications',
                    'Email Inbox': 'Email Inbox',
                    'Customer Relations': 'Customer Relations',
                    'Vendors': 'Vendors',
                    'Purchase Orders': 'Purchase Orders',
                    'Payments': 'Payments',
                    'Invoices': 'Invoices',
                    'Reports': 'Reports',
                    'Low Stock Alert': 'Low Stock Alert'
                },
                es: {
                    'Communications': 'Comunicaciones',
                    'Email Inbox': 'Bandeja de Entrada',
                    'Customer Relations': 'Relaciones con Clientes',
                    'Vendors': 'Proveedores',
                    'Purchase Orders': 'Ã“rdenes de Compra',
                    'Payments': 'Pagos',
                    'Invoices': 'Facturas',
                    'Reports': 'Informes',
                    'Low Stock Alert': 'Alerta de Bajo Stock'
                },
                fr: {
                    'Communications': 'Communications',
                    'Email Inbox': 'BoÃ®te de RÃ©ception',
                    'Customer Relations': 'Relations Clients',
                    'Vendors': 'Fournisseurs',
                    'Purchase Orders': 'Bons de Commande',
                    'Payments': 'Paiements',
                    'Invoices': 'Factures',
                    'Reports': 'Rapports',
                    'Low Stock Alert': 'Alerte Stock Faible'
                },
                de: {
                    'Communications': 'Kommunikation',
                    'Email Inbox': 'E-Mail-Posteingang',
                    'Customer Relations': 'Kundenbeziehungen',
                    'Vendors': 'Lieferanten',
                    'Purchase Orders': 'Bestellungen',
                    'Payments': 'Zahlungen',
                    'Invoices': 'Rechnungen',
                    'Reports': 'Berichte',
                    'Low Stock Alert': 'Niedriger Bestandsalarm'
                },
                zh: {
                    'Communications': 'é€šè®¯',
                    'Email Inbox': 'ç”µå­é‚®ä»¶æ”¶ä»¶ç®±',
                    'Customer Relations': 'å®¢æˆ·å…³ç³»',
                    'Vendors': 'ä¾›åº”å•†',
                    'Purchase Orders': 'é‡‡è´­è®¢å•',
                    'Payments': 'ä»˜æ¬¾',
                    'Invoices': 'å‘ç¥¨',
                    'Reports': 'æŠ¥å‘Š',
                    'Low Stock Alert': 'ä½Žåº“å­˜è­¦æŠ¥'
                },
                ja: {
                    'Communications': 'ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³',
                    'Email Inbox': 'ãƒ¡ãƒ¼ãƒ«å—ä¿¡ãƒˆãƒ¬ã‚¤',
                    'Customer Relations': 'é¡§å®¢é–¢ä¿‚',
                    'Vendors': 'ãƒ™ãƒ³ãƒ€ãƒ¼',
                    'Purchase Orders': 'ç™ºæ³¨æ›¸',
                    'Payments': 'æ”¯æ‰•ã„',
                    'Invoices': 'è«‹æ±‚æ›¸',
                    'Reports': 'ãƒ¬ãƒãƒ¼ãƒˆ',
                    'Low Stock Alert': 'åœ¨åº«ä¸è¶³è­¦å‘Š'
                },
                ko: {
                    'Communications': 'ì»¤ë®¤ë‹ˆì¼€ì´ì…˜',
                    'Email Inbox': 'ì´ë©”ì¼ ë°›ì€íŽ¸ì§€í•¨',
                    'Customer Relations': 'ê³ ê° ê´€ê³„',
                    'Vendors': 'ê³µê¸‰ì—…ì²´',
                    'Purchase Orders': 'êµ¬ë§¤ ì£¼ë¬¸',
                    'Payments': 'ê²°ì œ',
                    'Invoices': 'ì†¡ìž¥',
                    'Reports': 'ë³´ê³ ì„œ',
                    'Low Stock Alert': 'ìž¬ê³  ë¶€ì¡± ê²½ê³ '
                },
                ar: {
                    'Communications': 'Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª',
                    'Email Inbox': 'ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                    'Customer Relations': 'Ø¹Ù„Ø§Ù‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',
                    'Vendors': 'Ø§Ù„Ù…ÙˆØ±Ø¯ÙˆÙ†',
                    'Purchase Orders': 'Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø´Ø±Ø§Ø¡',
                    'Payments': 'Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª',
                    'Invoices': 'Ø§Ù„ÙÙˆØ§ØªÙŠØ±',
                    'Reports': 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±',
                    'Low Stock Alert': 'ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ù†Ø®ÙØ¶'
                }
            };

            // Manual translation function for missing items
            function patchTranslate(text, lang) {
                if (!lang || lang === 'en') return text;
                if (missingTranslations[lang] && missingTranslations[lang][text]) {
                    return missingTranslations[lang][text];
                }
                return text;
            }

            // Apply patch translations to all elements
            function applyPatchTranslations() {
                const lang = window.getCurrentLanguage ? window.getCurrentLanguage() : 'en';
                if (lang === 'en') return;

                document.querySelectorAll('[data-translate]').forEach(element => {
                    const originalText = element.getAttribute('data-translate');
                    const patchedTranslation = patchTranslate(originalText, lang);

                    // Only update if we have a translation
                    if (patchedTranslation !== originalText) {
                        if (element.childNodes.length === 1 && element.childNodes[0].nodeType === 3) {
                            element.textContent = patchedTranslation;
                        } else {
                            // Find text nodes and update them
                            element.childNodes.forEach(node => {
                                if (node.nodeType === 3) {
                                    const trimmed = node.textContent.trim();
                                    if (trimmed === originalText) {
                                        node.textContent = patchedTranslation;
                                    }
                                }
                            });
                        }
                    }
                });

                console.log('ðŸ”§ Patch translations applied');
            }

            // Apply patch after a short delay to ensure main translations have run
            setTimeout(applyPatchTranslations, 150);

            // Re-apply when main translation system updates
            const originalApply = window.applyTranslations;
            if (originalApply) {
                window.applyTranslations = function() {
                    originalApply();
                    setTimeout(applyPatchTranslations, 50);
                };
            }
        }
    });
})();
</script>

